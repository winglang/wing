---
title: API reference
id: api-reference
description: Wing standard library API reference for the util module
keywords: [Wing sdk, sdk, Wing API Reference]
hide_title: true
sidebar_position: 100
---

<!-- This file is automatically generated. Do not edit manually. -->
# API Reference <a name="API Reference" id="api-reference"></a>


## Classes <a name="Classes" id="Classes"></a>

### Util <a name="Util" id="@winglang/sdk.util.Util"></a>

Utility functions.


#### Static Functions <a name="Static Functions" id="Static Functions"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.util.Util.base64Decode">base64Decode</a></code> | Converts a string from base64 to UTF-8. |
| <code><a href="#@winglang/sdk.util.Util.base64Encode">base64Encode</a></code> | Converts a string from UTF-8 to base64. |
| <code><a href="#@winglang/sdk.util.Util.env">env</a></code> | Returns the value of an environment variable. |
| <code><a href="#@winglang/sdk.util.Util.exec">exec</a></code> | Execute a program with the given arguments, wait for it to finish, and return its outputs. |
| <code><a href="#@winglang/sdk.util.Util.nanoid">nanoid</a></code> | Generates a unique ID using the nanoid library. |
| <code><a href="#@winglang/sdk.util.Util.os">os</a></code> | Returns a string identifying the operating system platform. |
| <code><a href="#@winglang/sdk.util.Util.sha256">sha256</a></code> | Computes the SHA256 hash of the given data. |
| <code><a href="#@winglang/sdk.util.Util.shell">shell</a></code> | Executes a command in the shell and returns its standard output. |
| <code><a href="#@winglang/sdk.util.Util.sleep">sleep</a></code> | Suspends execution for a given duration. |
| <code><a href="#@winglang/sdk.util.Util.tryEnv">tryEnv</a></code> | Returns the value of an environment variable. |
| <code><a href="#@winglang/sdk.util.Util.ulid">ulid</a></code> | Generates universally unique lexicographically sortable identifier. |
| <code><a href="#@winglang/sdk.util.Util.uuidv4">uuidv4</a></code> | Generates a version 4 UUID. |
| <code><a href="#@winglang/sdk.util.Util.waitUntil">waitUntil</a></code> | Run a predicate repeatedly, waiting until it returns true or until the timeout elapses. |

---

##### `base64Decode` <a name="base64Decode" id="@winglang/sdk.util.Util.base64Decode"></a>

```wing
bring util;

util.base64Decode(stringToDecode: str, url?: bool);
```

Converts a string from base64 to UTF-8.

###### `stringToDecode`<sup>Required</sup> <a name="stringToDecode" id="@winglang/sdk.util.Util.base64Decode.parameter.stringToDecode"></a>

- *Type:* str

base64 string to decode.

---

###### `url`<sup>Optional</sup> <a name="url" id="@winglang/sdk.util.Util.base64Decode.parameter.url"></a>

- *Type:* bool

If `true`, the source is expected to be a URL-safe base64 string.

---

##### `base64Encode` <a name="base64Encode" id="@winglang/sdk.util.Util.base64Encode"></a>

```wing
bring util;

util.base64Encode(stringToEncode: str, url?: bool);
```

Converts a string from UTF-8 to base64.

###### `stringToEncode`<sup>Required</sup> <a name="stringToEncode" id="@winglang/sdk.util.Util.base64Encode.parameter.stringToEncode"></a>

- *Type:* str

The name of the UTF-8 string to encode.

---

###### `url`<sup>Optional</sup> <a name="url" id="@winglang/sdk.util.Util.base64Encode.parameter.url"></a>

- *Type:* bool

If `true`, a URL-safe base64 string is returned.

---

##### `env` <a name="env" id="@winglang/sdk.util.Util.env"></a>

```wing
bring util;

util.env(name: str);
```

Returns the value of an environment variable.

Throws if not found or empty.

###### `name`<sup>Required</sup> <a name="name" id="@winglang/sdk.util.Util.env.parameter.name"></a>

- *Type:* str

The name of the environment variable.

---

##### `exec` <a name="exec" id="@winglang/sdk.util.Util.exec"></a>

```wing
bring util;

util.exec(program: str, args: MutArray<str>, opts?: ExecOptions);
```

Execute a program with the given arguments, wait for it to finish, and return its outputs.

###### `program`<sup>Required</sup> <a name="program" id="@winglang/sdk.util.Util.exec.parameter.program"></a>

- *Type:* str

The program to execute.

---

###### `args`<sup>Required</sup> <a name="args" id="@winglang/sdk.util.Util.exec.parameter.args"></a>

- *Type:* MutArray&lt;str&gt;

An array of arguments to pass to the program.

---

###### `opts`<sup>Optional</sup> <a name="opts" id="@winglang/sdk.util.Util.exec.parameter.opts"></a>

- *Type:* <a href="#@winglang/sdk.util.ExecOptions">ExecOptions</a>

`ExecOptions`, such as the working directory and environment variables.

---

##### `nanoid` <a name="nanoid" id="@winglang/sdk.util.Util.nanoid"></a>

```wing
bring util;

util.nanoid(options?: NanoidOptions);
```

Generates a unique ID using the nanoid library.

#

> [https://github.com/ai/nanoid](https://github.com/ai/nanoid)

###### `options`<sup>Optional</sup> <a name="options" id="@winglang/sdk.util.Util.nanoid.parameter.options"></a>

- *Type:* <a href="#@winglang/sdk.util.NanoidOptions">NanoidOptions</a>

Optional options object for generating the ID.

---

##### `os` <a name="os" id="@winglang/sdk.util.Util.os"></a>

```wing
bring util;

util.os();
```

Returns a string identifying the operating system platform.

*Example*

```wing
"linux", "darwin", "win32"
```


##### `sha256` <a name="sha256" id="@winglang/sdk.util.Util.sha256"></a>

```wing
bring util;

util.sha256(data: str);
```

Computes the SHA256 hash of the given data.

###### `data`<sup>Required</sup> <a name="data" id="@winglang/sdk.util.Util.sha256.parameter.data"></a>

- *Type:* str

The string to be hashed.

---

##### `shell` <a name="shell" id="@winglang/sdk.util.Util.shell"></a>

```wing
bring util;

util.shell(command: str, opts?: ShellOptions);
```

Executes a command in the shell and returns its standard output.

###### `command`<sup>Required</sup> <a name="command" id="@winglang/sdk.util.Util.shell.parameter.command"></a>

- *Type:* str

The command string to execute in the shell.

---

###### `opts`<sup>Optional</sup> <a name="opts" id="@winglang/sdk.util.Util.shell.parameter.opts"></a>

- *Type:* <a href="#@winglang/sdk.util.ShellOptions">ShellOptions</a>

`ShellOptions`, such as the working directory and environment variables.

---

##### `sleep` <a name="sleep" id="@winglang/sdk.util.Util.sleep"></a>

```wing
bring util;

util.sleep(delay: duration);
```

Suspends execution for a given duration.

###### `delay`<sup>Required</sup> <a name="delay" id="@winglang/sdk.util.Util.sleep.parameter.delay"></a>

- *Type:* <a href="#@winglang/sdk.std.Duration">duration</a>

The time to suspend execution.

---

##### `tryEnv` <a name="tryEnv" id="@winglang/sdk.util.Util.tryEnv"></a>

```wing
bring util;

util.tryEnv(name: str);
```

Returns the value of an environment variable.

Returns `nil` if not found or empty.

###### `name`<sup>Required</sup> <a name="name" id="@winglang/sdk.util.Util.tryEnv.parameter.name"></a>

- *Type:* str

The name of the environment variable.

---

##### `ulid` <a name="ulid" id="@winglang/sdk.util.Util.ulid"></a>

```wing
bring util;

util.ulid(options?: UlidOptions);
```

Generates universally unique lexicographically sortable identifier.

#

> [https://github.com/ulid/javascript](https://github.com/ulid/javascript)

###### `options`<sup>Optional</sup> <a name="options" id="@winglang/sdk.util.Util.ulid.parameter.options"></a>

- *Type:* <a href="#@winglang/sdk.util.UlidOptions">UlidOptions</a>

Optional options object for generating the ID.

---

##### `uuidv4` <a name="uuidv4" id="@winglang/sdk.util.Util.uuidv4"></a>

```wing
bring util;

util.uuidv4();
```

Generates a version 4 UUID.

##### `waitUntil` <a name="waitUntil" id="@winglang/sdk.util.Util.waitUntil"></a>

```wing
bring util;

util.waitUntil(predicate: IPredicateHandler, props?: WaitUntilProps);
```

Run a predicate repeatedly, waiting until it returns true or until the timeout elapses.

###### `predicate`<sup>Required</sup> <a name="predicate" id="@winglang/sdk.util.Util.waitUntil.parameter.predicate"></a>

- *Type:* <a href="#@winglang/sdk.util.IPredicateHandler">IPredicateHandler</a>

The function that will be evaluated.

---

###### `props`<sup>Optional</sup> <a name="props" id="@winglang/sdk.util.Util.waitUntil.parameter.props"></a>

- *Type:* <a href="#@winglang/sdk.util.WaitUntilProps">WaitUntilProps</a>

Timeout and interval values, default to one 1m timeout and 0.1sec interval.

---



## Structs <a name="Structs" id="Structs"></a>

### CommandOptions <a name="CommandOptions" id="@winglang/sdk.util.CommandOptions"></a>

Base command options.

#### Initializer <a name="Initializer" id="@winglang/sdk.util.CommandOptions.Initializer"></a>

```wing
bring util;

let CommandOptions = util.CommandOptions{ ... };
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.util.CommandOptions.property.cwd">cwd</a></code> | <code>str</code> | Path to a directory to run the command in. |
| <code><a href="#@winglang/sdk.util.CommandOptions.property.env">env</a></code> | <code>MutMap&lt;str&gt;</code> | Environment variables. |
| <code><a href="#@winglang/sdk.util.CommandOptions.property.inheritEnv">inheritEnv</a></code> | <code>bool</code> | Whether to inherit environment variables from the host's environment. |

---

##### `cwd`<sup>Optional</sup> <a name="cwd" id="@winglang/sdk.util.CommandOptions.property.cwd"></a>

```wing
cwd: str;
```

- *Type:* str
- *Default:* the default working directory of the host

Path to a directory to run the command in.

---

##### `env`<sup>Optional</sup> <a name="env" id="@winglang/sdk.util.CommandOptions.property.env"></a>

```wing
env: MutMap<str>;
```

- *Type:* MutMap&lt;str&gt;
- *Default:* no environment variables

Environment variables.

---

##### `inheritEnv`<sup>Optional</sup> <a name="inheritEnv" id="@winglang/sdk.util.CommandOptions.property.inheritEnv"></a>

```wing
inheritEnv: bool;
```

- *Type:* bool
- *Default:* false

Whether to inherit environment variables from the host's environment.

---

### ExecOptions <a name="ExecOptions" id="@winglang/sdk.util.ExecOptions"></a>

Additional options for `util.exec()`.

#### Initializer <a name="Initializer" id="@winglang/sdk.util.ExecOptions.Initializer"></a>

```wing
bring util;

let ExecOptions = util.ExecOptions{ ... };
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.util.ExecOptions.property.cwd">cwd</a></code> | <code>str</code> | Path to a directory to run the command in. |
| <code><a href="#@winglang/sdk.util.ExecOptions.property.env">env</a></code> | <code>MutMap&lt;str&gt;</code> | Environment variables. |
| <code><a href="#@winglang/sdk.util.ExecOptions.property.inheritEnv">inheritEnv</a></code> | <code>bool</code> | Whether to inherit environment variables from the host's environment. |

---

##### `cwd`<sup>Optional</sup> <a name="cwd" id="@winglang/sdk.util.ExecOptions.property.cwd"></a>

```wing
cwd: str;
```

- *Type:* str
- *Default:* the default working directory of the host

Path to a directory to run the command in.

---

##### `env`<sup>Optional</sup> <a name="env" id="@winglang/sdk.util.ExecOptions.property.env"></a>

```wing
env: MutMap<str>;
```

- *Type:* MutMap&lt;str&gt;
- *Default:* no environment variables

Environment variables.

---

##### `inheritEnv`<sup>Optional</sup> <a name="inheritEnv" id="@winglang/sdk.util.ExecOptions.property.inheritEnv"></a>

```wing
inheritEnv: bool;
```

- *Type:* bool
- *Default:* false

Whether to inherit environment variables from the host's environment.

---

### NanoidOptions <a name="NanoidOptions" id="@winglang/sdk.util.NanoidOptions"></a>

Options to generating a unique ID.

#### Initializer <a name="Initializer" id="@winglang/sdk.util.NanoidOptions.Initializer"></a>

```wing
bring util;

let NanoidOptions = util.NanoidOptions{ ... };
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.util.NanoidOptions.property.alphabet">alphabet</a></code> | <code>str</code> | Characters that make up the alphabet to generate the ID, limited to 256 characters or fewer. |
| <code><a href="#@winglang/sdk.util.NanoidOptions.property.size">size</a></code> | <code>num</code> | Size of ID. |

---

##### `alphabet`<sup>Optional</sup> <a name="alphabet" id="@winglang/sdk.util.NanoidOptions.property.alphabet"></a>

```wing
alphabet: str;
```

- *Type:* str

Characters that make up the alphabet to generate the ID, limited to 256 characters or fewer.

---

##### `size`<sup>Optional</sup> <a name="size" id="@winglang/sdk.util.NanoidOptions.property.size"></a>

```wing
size: num;
```

- *Type:* num
- *Default:* 21

Size of ID.

---

### Output <a name="Output" id="@winglang/sdk.util.Output"></a>

Output of a finished process.

#### Initializer <a name="Initializer" id="@winglang/sdk.util.Output.Initializer"></a>

```wing
bring util;

let Output = util.Output{ ... };
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.util.Output.property.status">status</a></code> | <code>num</code> | A process's exit status. |
| <code><a href="#@winglang/sdk.util.Output.property.stderr">stderr</a></code> | <code>str</code> | The standard error of a finished process. |
| <code><a href="#@winglang/sdk.util.Output.property.stdout">stdout</a></code> | <code>str</code> | The standard output of a finished process. |

---

##### `status`<sup>Required</sup> <a name="status" id="@winglang/sdk.util.Output.property.status"></a>

```wing
status: num;
```

- *Type:* num

A process's exit status.

---

##### `stderr`<sup>Required</sup> <a name="stderr" id="@winglang/sdk.util.Output.property.stderr"></a>

```wing
stderr: str;
```

- *Type:* str

The standard error of a finished process.

---

##### `stdout`<sup>Required</sup> <a name="stdout" id="@winglang/sdk.util.Output.property.stdout"></a>

```wing
stdout: str;
```

- *Type:* str

The standard output of a finished process.

---

### ShellOptions <a name="ShellOptions" id="@winglang/sdk.util.ShellOptions"></a>

Additional options for `util.shell()`.

#### Initializer <a name="Initializer" id="@winglang/sdk.util.ShellOptions.Initializer"></a>

```wing
bring util;

let ShellOptions = util.ShellOptions{ ... };
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.util.ShellOptions.property.cwd">cwd</a></code> | <code>str</code> | Path to a directory to run the command in. |
| <code><a href="#@winglang/sdk.util.ShellOptions.property.env">env</a></code> | <code>MutMap&lt;str&gt;</code> | Environment variables. |
| <code><a href="#@winglang/sdk.util.ShellOptions.property.inheritEnv">inheritEnv</a></code> | <code>bool</code> | Whether to inherit environment variables from the host's environment. |
| <code><a href="#@winglang/sdk.util.ShellOptions.property.throw">throw</a></code> | <code>bool</code> | Whether to throw an error on command execution failure. |

---

##### `cwd`<sup>Optional</sup> <a name="cwd" id="@winglang/sdk.util.ShellOptions.property.cwd"></a>

```wing
cwd: str;
```

- *Type:* str
- *Default:* the default working directory of the host

Path to a directory to run the command in.

---

##### `env`<sup>Optional</sup> <a name="env" id="@winglang/sdk.util.ShellOptions.property.env"></a>

```wing
env: MutMap<str>;
```

- *Type:* MutMap&lt;str&gt;
- *Default:* no environment variables

Environment variables.

---

##### `inheritEnv`<sup>Optional</sup> <a name="inheritEnv" id="@winglang/sdk.util.ShellOptions.property.inheritEnv"></a>

```wing
inheritEnv: bool;
```

- *Type:* bool
- *Default:* false

Whether to inherit environment variables from the host's environment.

---

##### `throw`<sup>Optional</sup> <a name="throw" id="@winglang/sdk.util.ShellOptions.property.throw"></a>

```wing
throw: bool;
```

- *Type:* bool
- *Default:* true

Whether to throw an error on command execution failure.

---

### UlidOptions <a name="UlidOptions" id="@winglang/sdk.util.UlidOptions"></a>

Options to generate universally unique lexicographically sortable identifiers.

#### Initializer <a name="Initializer" id="@winglang/sdk.util.UlidOptions.Initializer"></a>

```wing
bring util;

let UlidOptions = util.UlidOptions{ ... };
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.util.UlidOptions.property.seed">seed</a></code> | <code>num</code> | You can also input a seed time which will consistently give you the same string for the time component. |

---

##### `seed`<sup>Optional</sup> <a name="seed" id="@winglang/sdk.util.UlidOptions.property.seed"></a>

```wing
seed: num;
```

- *Type:* num
- *Default:* Date.now()

You can also input a seed time which will consistently give you the same string for the time component.

This is useful for migrating to ulid.

---

### WaitUntilProps <a name="WaitUntilProps" id="@winglang/sdk.util.WaitUntilProps"></a>

Properties for `util.waitUntil`.

#### Initializer <a name="Initializer" id="@winglang/sdk.util.WaitUntilProps.Initializer"></a>

```wing
bring util;

let WaitUntilProps = util.WaitUntilProps{ ... };
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.util.WaitUntilProps.property.interval">interval</a></code> | <code><a href="#@winglang/sdk.std.Duration">duration</a></code> | Interval between predicate retries. |
| <code><a href="#@winglang/sdk.util.WaitUntilProps.property.timeout">timeout</a></code> | <code><a href="#@winglang/sdk.std.Duration">duration</a></code> | The timeout for keep trying predicate. |

---

##### `interval`<sup>Optional</sup> <a name="interval" id="@winglang/sdk.util.WaitUntilProps.property.interval"></a>

```wing
interval: duration;
```

- *Type:* <a href="#@winglang/sdk.std.Duration">duration</a>
- *Default:* 0.1s

Interval between predicate retries.

---

##### `timeout`<sup>Optional</sup> <a name="timeout" id="@winglang/sdk.util.WaitUntilProps.property.timeout"></a>

```wing
timeout: duration;
```

- *Type:* <a href="#@winglang/sdk.std.Duration">duration</a>
- *Default:* 1m

The timeout for keep trying predicate.

---

## Protocols <a name="Protocols" id="Protocols"></a>

### IPredicateHandler <a name="IPredicateHandler" id="@winglang/sdk.util.IPredicateHandler"></a>

- *Extends:* <a href="#@winglang/sdk.std.IInflight">IInflight</a>

- *Implemented By:* <a href="#@winglang/sdk.util.IPredicateHandler">IPredicateHandler</a>

**Inflight client:** [@winglang/sdk.util.IPredicateHandlerClient](#@winglang/sdk.util.IPredicateHandlerClient)

A predicate with an inflight "handle" method that can be passed to `util.busyWait`.



### IPredicateHandlerClient <a name="IPredicateHandlerClient" id="@winglang/sdk.util.IPredicateHandlerClient"></a>

- *Implemented By:* <a href="#@winglang/sdk.util.IPredicateHandlerClient">IPredicateHandlerClient</a>

Inflight client for `IPredicateHandler`.

#### Methods <a name="Methods" id="Methods"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.util.IPredicateHandlerClient.handle">handle</a></code> | The Predicate function that is called. |

---

##### `handle` <a name="handle" id="@winglang/sdk.util.IPredicateHandlerClient.handle"></a>

```wing
inflight handle(): bool
```

The Predicate function that is called.


