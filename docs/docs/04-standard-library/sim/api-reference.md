---
title: API reference
id: api-reference
description: Wing standard library API reference for the sim module
keywords: [Wing sdk, sdk, Wing API Reference]
hide_title: true
sidebar_position: 100
---

<!-- This file is automatically generated. Do not edit manually. -->
# API Reference <a name="API Reference" id="api-reference"></a>

## Resources <a name="Resources" id="Resources"></a>

### State <a name="State" id="@winglang/sdk.sim.State"></a>

- *Implements:* <a href="#@winglang/sdk.sim.ISimulatorResource">ISimulatorResource</a>

Key/value in-memory state for the simulator.

Use the preflight method `token(key)` to obtain a token that can be used to reference the value
of the state at runtime.

During deployment (i.e. `cloud.OnDeploy` or `cloud.Service` startup), you must call the inflight
method `set(key, value)` to set the runtime value. The value will be available at runtime through
the inflight method `get(key)` (or resolved as a token).

See tests for examples.

#### Initializers <a name="Initializers" id="@winglang/sdk.sim.State.Initializer"></a>

```wing
bring sim;

new sim.State();
```

| **Name** | **Type** | **Description** |
| --- | --- | --- |

---

#### Methods <a name="Methods" id="Methods"></a>

##### Preflight Methods

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.State.token">token</a></code> | Returns a token that can be used to retrieve the value of the state after the simulation has run. |
| <code><a href="#@winglang/sdk.sim.State.toSimulator">toSimulator</a></code> | Convert this resource to a resource schema for the simulator. |

##### Inflight Methods

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.IStateClient.get">get</a></code> | Gets the runtime state of this object. |
| <code><a href="#@winglang/sdk.sim.IStateClient.set">set</a></code> | Sets the state of runtime a runtime object. |
| <code><a href="#@winglang/sdk.sim.IStateClient.tryGet">tryGet</a></code> | Checks if runtime state exists for this object and returns it's value. |

---

##### `token` <a name="token" id="@winglang/sdk.sim.State.token"></a>

```wing
token(key: str): str
```

Returns a token that can be used to retrieve the value of the state after the simulation has run.

###### `key`<sup>Required</sup> <a name="key" id="@winglang/sdk.sim.State.token.parameter.key"></a>

- *Type:* str

The object key retrieved through the inflight `state.get()`.

---

##### `toSimulator` <a name="toSimulator" id="@winglang/sdk.sim.State.toSimulator"></a>

```wing
toSimulator(): BaseResourceSchema
```

Convert this resource to a resource schema for the simulator.

##### `get` <a name="get" id="@winglang/sdk.sim.IStateClient.get"></a>

```wing
get(key: str): Json
```

Gets the runtime state of this object.

Throws if there is no value for the given key.

###### `key`<sup>Required</sup> <a name="key" id="@winglang/sdk.sim.IStateClient.get.parameter.key"></a>

- *Type:* str

The object's key.

---

##### `set` <a name="set" id="@winglang/sdk.sim.IStateClient.set"></a>

```wing
set(key: str, value: Json): void
```

Sets the state of runtime a runtime object.

###### `key`<sup>Required</sup> <a name="key" id="@winglang/sdk.sim.IStateClient.set.parameter.key"></a>

- *Type:* str

The object's key.

---

###### `value`<sup>Required</sup> <a name="value" id="@winglang/sdk.sim.IStateClient.set.parameter.value"></a>

- *Type:* <a href="#@winglang/sdk.std.Json">Json</a>

The object's value.

---

##### `tryGet` <a name="tryGet" id="@winglang/sdk.sim.IStateClient.tryGet"></a>

```wing
tryGet(key: str): Json
```

Checks if runtime state exists for this object and returns it's value.

If no value exists,
returns `nil`.

###### `key`<sup>Required</sup> <a name="key" id="@winglang/sdk.sim.IStateClient.tryGet.parameter.key"></a>

- *Type:* str

The object's key.

---

#### Static Functions <a name="Static Functions" id="Static Functions"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.State.onLiftType">onLiftType</a></code> | A hook called by the Wing compiler once for each inflight host that needs to use this type inflight. |

---

##### `onLiftType` <a name="onLiftType" id="@winglang/sdk.sim.State.onLiftType"></a>

```wing
bring sim;

sim.State.onLiftType(host: IInflightHost, ops: MutArray<str>);
```

A hook called by the Wing compiler once for each inflight host that needs to use this type inflight.

The list of requested inflight methods
needed by the inflight host are given by `ops`.

This method is commonly used for adding permissions, environment variables, or
other capabilities to the inflight host.

###### `host`<sup>Required</sup> <a name="host" id="@winglang/sdk.sim.State.onLiftType.parameter.host"></a>

- *Type:* <a href="#@winglang/sdk.std.IInflightHost">IInflightHost</a>

---

###### `ops`<sup>Required</sup> <a name="ops" id="@winglang/sdk.sim.State.onLiftType.parameter.ops"></a>

- *Type:* MutArray&lt;str&gt;

---

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.State.property.node">node</a></code> | <code>constructs.Node</code> | The tree node. |

---

##### `node`<sup>Required</sup> <a name="node" id="@winglang/sdk.sim.State.property.node"></a>

```wing
node: Node;
```

- *Type:* constructs.Node

The tree node.

---




## Protocols <a name="Protocols" id="Protocols"></a>

### ISimulatorResource <a name="ISimulatorResource" id="@winglang/sdk.sim.ISimulatorResource"></a>

- *Extends:* <a href="#@winglang/sdk.std.IResource">IResource</a>

- *Implemented By:* <a href="#@winglang/sdk.sim.State">State</a>, <a href="#@winglang/sdk.sim.ISimulatorResource">ISimulatorResource</a>

Interfaces shared by all polycon implementations (preflight classes) targeting the simulator.

#### Methods <a name="Methods" id="Methods"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.ISimulatorResource.toSimulator">toSimulator</a></code> | Convert this resource to a resource schema for the simulator. |

---

##### `toSimulator` <a name="toSimulator" id="@winglang/sdk.sim.ISimulatorResource.toSimulator"></a>

```wing
toSimulator(): BaseResourceSchema
```

Convert this resource to a resource schema for the simulator.

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.ISimulatorResource.property.node">node</a></code> | <code>constructs.Node</code> | The tree node. |

---

##### `node`<sup>Required</sup> <a name="node" id="@winglang/sdk.sim.ISimulatorResource.property.node"></a>

```wing
node: Node;
```

- *Type:* constructs.Node

The tree node.

---

