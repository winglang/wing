---
title: API Reference
id: api-reference
description: Wing standard library API reference for the sim module
keywords: [Wing sdk, sdk, Wing API Reference]
hide_title: true
sidebar_position: 100
---

<!-- This file is automatically generated. Do not edit manually. -->
# API Reference <a name="API Reference" id="api-reference"></a>

## Resources <a name="Resources" id="Resources"></a>

### Container <a name="Container" id="@winglang/sdk.sim.Container"></a>

- *Implements:* <a href="#@winglang/sdk.sim.ISimulatorResource">ISimulatorResource</a>

Represents a container running in the Wing Simulator.

#### Initializers <a name="Initializers" id="@winglang/sdk.sim.Container.Initializer"></a>

```wing
bring sim;

new sim.Container(props: ContainerProps);
```

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.Container.Initializer.parameter.props">props</a></code> | <code><a href="#@winglang/sdk.sim.ContainerProps">ContainerProps</a></code> | *No description.* |

---

##### `props`<sup>Required</sup> <a name="props" id="@winglang/sdk.sim.Container.Initializer.parameter.props"></a>

- *Type:* <a href="#@winglang/sdk.sim.ContainerProps">ContainerProps</a>

---

#### Methods <a name="Methods" id="Methods"></a>

##### Preflight Methods

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.Container.toSimulator">toSimulator</a></code> | Convert this resource to a resource schema for the simulator. |

---

##### `toSimulator` <a name="toSimulator" id="@winglang/sdk.sim.Container.toSimulator"></a>

```wing
toSimulator(): ToSimulatorOutput
```

Convert this resource to a resource schema for the simulator.

#### Static Functions <a name="Static Functions" id="Static Functions"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.Container.onLiftType">onLiftType</a></code> | A hook called by the Wing compiler once for each inflight host that needs to use this type inflight. |
| <code><a href="#@winglang/sdk.sim.Container.toInflight">toInflight</a></code> | Generates an asynchronous JavaScript statement which can be used to create an inflight client for a resource. |

---

##### `onLiftType` <a name="onLiftType" id="@winglang/sdk.sim.Container.onLiftType"></a>

```wing
bring sim;

sim.Container.onLiftType(host: IInflightHost, ops: MutArray<str>);
```

A hook called by the Wing compiler once for each inflight host that needs to use this type inflight.

The list of requested inflight methods
needed by the inflight host are given by `ops`.

This method is commonly used for adding permissions, environment variables, or
other capabilities to the inflight host.

###### `host`<sup>Required</sup> <a name="host" id="@winglang/sdk.sim.Container.onLiftType.parameter.host"></a>

- *Type:* <a href="#@winglang/sdk.std.IInflightHost">IInflightHost</a>

---

###### `ops`<sup>Required</sup> <a name="ops" id="@winglang/sdk.sim.Container.onLiftType.parameter.ops"></a>

- *Type:* MutArray&lt;str&gt;

---

##### `toInflight` <a name="toInflight" id="@winglang/sdk.sim.Container.toInflight"></a>

```wing
bring sim;

sim.Container.toInflight(obj: IResource);
```

Generates an asynchronous JavaScript statement which can be used to create an inflight client for a resource.

NOTE: This statement must be executed within an async context.

###### `obj`<sup>Required</sup> <a name="obj" id="@winglang/sdk.sim.Container.toInflight.parameter.obj"></a>

- *Type:* <a href="#@winglang/sdk.std.IResource">IResource</a>

---

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.Container.property.node">node</a></code> | <code>constructs.Node</code> | The tree node. |
| <code><a href="#@winglang/sdk.sim.Container.property.hostPort">hostPort</a></code> | <code>str</code> | A token that resolves to the host port of this container. |

---

##### `node`<sup>Required</sup> <a name="node" id="@winglang/sdk.sim.Container.property.node"></a>

```wing
node: Node;
```

- *Type:* constructs.Node

The tree node.

---

##### `hostPort`<sup>Optional</sup> <a name="hostPort" id="@winglang/sdk.sim.Container.property.hostPort"></a>

```wing
hostPort: str;
```

- *Type:* str

A token that resolves to the host port of this container.

---


### Policy <a name="Policy" id="@winglang/sdk.sim.Policy"></a>

- *Implements:* <a href="#@winglang/sdk.sim.ISimulatorResource">ISimulatorResource</a>

Implementation of `sim.Policy`.

#### Initializers <a name="Initializers" id="@winglang/sdk.sim.Policy.Initializer"></a>

```wing
bring sim;

new sim.Policy(props: PolicyProps);
```

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.Policy.Initializer.parameter.props">props</a></code> | <code><a href="#@winglang/sdk.sim.PolicyProps">PolicyProps</a></code> | *No description.* |

---

##### `props`<sup>Required</sup> <a name="props" id="@winglang/sdk.sim.Policy.Initializer.parameter.props"></a>

- *Type:* <a href="#@winglang/sdk.sim.PolicyProps">PolicyProps</a>

---

#### Methods <a name="Methods" id="Methods"></a>

##### Preflight Methods

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.Policy.addStatement">addStatement</a></code> | Adds a statement to the policy. |
| <code><a href="#@winglang/sdk.sim.Policy.toSimulator">toSimulator</a></code> | Convert this resource to a resource schema for the simulator. |

---

##### `addStatement` <a name="addStatement" id="@winglang/sdk.sim.Policy.addStatement"></a>

```wing
addStatement(resource: IResource, op: str): void
```

Adds a statement to the policy.

###### `resource`<sup>Required</sup> <a name="resource" id="@winglang/sdk.sim.Policy.addStatement.parameter.resource"></a>

- *Type:* <a href="#@winglang/sdk.std.IResource">IResource</a>

---

###### `op`<sup>Required</sup> <a name="op" id="@winglang/sdk.sim.Policy.addStatement.parameter.op"></a>

- *Type:* str

---

##### `toSimulator` <a name="toSimulator" id="@winglang/sdk.sim.Policy.toSimulator"></a>

```wing
toSimulator(): ToSimulatorOutput
```

Convert this resource to a resource schema for the simulator.

#### Static Functions <a name="Static Functions" id="Static Functions"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.Policy.onLiftType">onLiftType</a></code> | A hook called by the Wing compiler once for each inflight host that needs to use this type inflight. |
| <code><a href="#@winglang/sdk.sim.Policy.toInflight">toInflight</a></code> | Generates an asynchronous JavaScript statement which can be used to create an inflight client for a resource. |

---

##### `onLiftType` <a name="onLiftType" id="@winglang/sdk.sim.Policy.onLiftType"></a>

```wing
bring sim;

sim.Policy.onLiftType(host: IInflightHost, ops: MutArray<str>);
```

A hook called by the Wing compiler once for each inflight host that needs to use this type inflight.

The list of requested inflight methods
needed by the inflight host are given by `ops`.

This method is commonly used for adding permissions, environment variables, or
other capabilities to the inflight host.

###### `host`<sup>Required</sup> <a name="host" id="@winglang/sdk.sim.Policy.onLiftType.parameter.host"></a>

- *Type:* <a href="#@winglang/sdk.std.IInflightHost">IInflightHost</a>

---

###### `ops`<sup>Required</sup> <a name="ops" id="@winglang/sdk.sim.Policy.onLiftType.parameter.ops"></a>

- *Type:* MutArray&lt;str&gt;

---

##### `toInflight` <a name="toInflight" id="@winglang/sdk.sim.Policy.toInflight"></a>

```wing
bring sim;

sim.Policy.toInflight(obj: IResource);
```

Generates an asynchronous JavaScript statement which can be used to create an inflight client for a resource.

NOTE: This statement must be executed within an async context.

###### `obj`<sup>Required</sup> <a name="obj" id="@winglang/sdk.sim.Policy.toInflight.parameter.obj"></a>

- *Type:* <a href="#@winglang/sdk.std.IResource">IResource</a>

---

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.Policy.property.node">node</a></code> | <code>constructs.Node</code> | The tree node. |

---

##### `node`<sup>Required</sup> <a name="node" id="@winglang/sdk.sim.Policy.property.node"></a>

```wing
node: Node;
```

- *Type:* constructs.Node

The tree node.

---


### Resource <a name="Resource" id="@winglang/sdk.sim.Resource"></a>

- *Implements:* <a href="#@winglang/sdk.std.IResource">IResource</a>, <a href="#@winglang/sdk.sim.ISimulatorResource">ISimulatorResource</a>, <a href="#@winglang/sdk.std.IInflightHost">IInflightHost</a>, <a href="#@winglang/sdk.sim.ISimulatorInflightHost">ISimulatorInflightHost</a>

A backend for a simulated resource.

#### Initializers <a name="Initializers" id="@winglang/sdk.sim.Resource.Initializer"></a>

```wing
bring sim;

new sim.Resource(factory: IResourceFactory);
```

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.Resource.Initializer.parameter.factory">factory</a></code> | <code><a href="#@winglang/sdk.sim.IResourceFactory">IResourceFactory</a></code> | *No description.* |

---

##### `factory`<sup>Required</sup> <a name="factory" id="@winglang/sdk.sim.Resource.Initializer.parameter.factory"></a>

- *Type:* <a href="#@winglang/sdk.sim.IResourceFactory">IResourceFactory</a>

---

#### Methods <a name="Methods" id="Methods"></a>

##### Preflight Methods

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.Resource.addEnvironment">addEnvironment</a></code> | Add an environment variable to make available to the inflight code. |
| <code><a href="#@winglang/sdk.sim.Resource.addPermission">addPermission</a></code> | Add a simulated permission to this inflight host. |
| <code><a href="#@winglang/sdk.sim.Resource.createToken">createToken</a></code> | Obtain a token that can be used to reference an attribute of this resource that is only resolved once the resource is started in the simulator. |
| <code><a href="#@winglang/sdk.sim.Resource.toSimulator">toSimulator</a></code> | Convert this resource to a resource schema for the simulator. |

##### Inflight Methods

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.IResourceClient.call">call</a></code> | Call a method on the resource. |

---

##### `addEnvironment` <a name="addEnvironment" id="@winglang/sdk.sim.Resource.addEnvironment"></a>

```wing
addEnvironment(name: str, value: str): void
```

Add an environment variable to make available to the inflight code.

###### `name`<sup>Required</sup> <a name="name" id="@winglang/sdk.sim.Resource.addEnvironment.parameter.name"></a>

- *Type:* str

---

###### `value`<sup>Required</sup> <a name="value" id="@winglang/sdk.sim.Resource.addEnvironment.parameter.value"></a>

- *Type:* str

---

##### `addPermission` <a name="addPermission" id="@winglang/sdk.sim.Resource.addPermission"></a>

```wing
addPermission(resource: IResource, op: str): void
```

Add a simulated permission to this inflight host.

###### `resource`<sup>Required</sup> <a name="resource" id="@winglang/sdk.sim.Resource.addPermission.parameter.resource"></a>

- *Type:* <a href="#@winglang/sdk.std.IResource">IResource</a>

---

###### `op`<sup>Required</sup> <a name="op" id="@winglang/sdk.sim.Resource.addPermission.parameter.op"></a>

- *Type:* str

---

##### `createToken` <a name="createToken" id="@winglang/sdk.sim.Resource.createToken"></a>

```wing
createToken(name: str): str
```

Obtain a token that can be used to reference an attribute of this resource that is only resolved once the resource is started in the simulator.

If the token is used in inflight code or in the configuration of a simulated
resource (e.g. as an environment variable), the relevant resource will
automatically take a dependency on the resource the token belongs to.

###### `name`<sup>Required</sup> <a name="name" id="@winglang/sdk.sim.Resource.createToken.parameter.name"></a>

- *Type:* str

The name of the token.

---

##### `toSimulator` <a name="toSimulator" id="@winglang/sdk.sim.Resource.toSimulator"></a>

```wing
toSimulator(): ToSimulatorOutput
```

Convert this resource to a resource schema for the simulator.

##### `call` <a name="call" id="@winglang/sdk.sim.IResourceClient.call"></a>

```wing
inflight call(method: str, args?: MutArray<Json>): Json
```

Call a method on the resource.

###### `method`<sup>Required</sup> <a name="method" id="@winglang/sdk.sim.IResourceClient.call.parameter.method"></a>

- *Type:* str

---

###### `args`<sup>Optional</sup> <a name="args" id="@winglang/sdk.sim.IResourceClient.call.parameter.args"></a>

- *Type:* MutArray&lt;<a href="#@winglang/sdk.std.Json">Json</a>&gt;

---

#### Static Functions <a name="Static Functions" id="Static Functions"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.Resource.onLiftType">onLiftType</a></code> | A hook called by the Wing compiler once for each inflight host that needs to use this type inflight. |
| <code><a href="#@winglang/sdk.sim.Resource.toInflight">toInflight</a></code> | Generates an asynchronous JavaScript statement which can be used to create an inflight client for a resource. |

---

##### `onLiftType` <a name="onLiftType" id="@winglang/sdk.sim.Resource.onLiftType"></a>

```wing
bring sim;

sim.Resource.onLiftType(host: IInflightHost, ops: MutArray<str>);
```

A hook called by the Wing compiler once for each inflight host that needs to use this type inflight.

The list of requested inflight methods
needed by the inflight host are given by `ops`.

This method is commonly used for adding permissions, environment variables, or
other capabilities to the inflight host.

###### `host`<sup>Required</sup> <a name="host" id="@winglang/sdk.sim.Resource.onLiftType.parameter.host"></a>

- *Type:* <a href="#@winglang/sdk.std.IInflightHost">IInflightHost</a>

---

###### `ops`<sup>Required</sup> <a name="ops" id="@winglang/sdk.sim.Resource.onLiftType.parameter.ops"></a>

- *Type:* MutArray&lt;str&gt;

---

##### `toInflight` <a name="toInflight" id="@winglang/sdk.sim.Resource.toInflight"></a>

```wing
bring sim;

sim.Resource.toInflight(obj: IResource);
```

Generates an asynchronous JavaScript statement which can be used to create an inflight client for a resource.

NOTE: This statement must be executed within an async context.

###### `obj`<sup>Required</sup> <a name="obj" id="@winglang/sdk.sim.Resource.toInflight.parameter.obj"></a>

- *Type:* <a href="#@winglang/sdk.std.IResource">IResource</a>

---

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.Resource.property.node">node</a></code> | <code>constructs.Node</code> | The tree node. |

---

##### `node`<sup>Required</sup> <a name="node" id="@winglang/sdk.sim.Resource.property.node"></a>

```wing
node: Node;
```

- *Type:* constructs.Node

The tree node.

---


### State <a name="State" id="@winglang/sdk.sim.State"></a>

- *Implements:* <a href="#@winglang/sdk.sim.ISimulatorResource">ISimulatorResource</a>

Key/value in-memory state for the simulator.

Use the preflight method `token(key)` to obtain a token that can be used to reference the value
of the state at runtime.

During deployment (i.e. `cloud.OnDeploy` or `cloud.Service` startup), you must call the inflight
method `set(key, value)` to set the runtime value. The value will be available at runtime through
the inflight method `get(key)` (or resolved as a token).

See tests for examples.

#### Initializers <a name="Initializers" id="@winglang/sdk.sim.State.Initializer"></a>

```wing
bring sim;

new sim.State();
```

| **Name** | **Type** | **Description** |
| --- | --- | --- |

---

#### Methods <a name="Methods" id="Methods"></a>

##### Preflight Methods

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.State.token">token</a></code> | Returns a token that can be used to retrieve the value of the state after the simulation has run. |
| <code><a href="#@winglang/sdk.sim.State.toSimulator">toSimulator</a></code> | Convert this resource to a resource schema for the simulator. |

##### Inflight Methods

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.IStateClient.get">get</a></code> | Gets the runtime state of this object. |
| <code><a href="#@winglang/sdk.sim.IStateClient.set">set</a></code> | Sets the state of runtime a runtime object. |
| <code><a href="#@winglang/sdk.sim.IStateClient.tryGet">tryGet</a></code> | Checks if runtime state exists for this object and returns it's value. |

---

##### `token` <a name="token" id="@winglang/sdk.sim.State.token"></a>

```wing
token(key: str): str
```

Returns a token that can be used to retrieve the value of the state after the simulation has run.

###### `key`<sup>Required</sup> <a name="key" id="@winglang/sdk.sim.State.token.parameter.key"></a>

- *Type:* str

The object key retrieved through the inflight `state.get()`.

---

##### `toSimulator` <a name="toSimulator" id="@winglang/sdk.sim.State.toSimulator"></a>

```wing
toSimulator(): ToSimulatorOutput
```

Convert this resource to a resource schema for the simulator.

##### `get` <a name="get" id="@winglang/sdk.sim.IStateClient.get"></a>

```wing
inflight get(key: str): Json
```

Gets the runtime state of this object.

Throws if there is no value for the given key.

###### `key`<sup>Required</sup> <a name="key" id="@winglang/sdk.sim.IStateClient.get.parameter.key"></a>

- *Type:* str

The object's key.

---

##### `set` <a name="set" id="@winglang/sdk.sim.IStateClient.set"></a>

```wing
inflight set(key: str, value: Json): void
```

Sets the state of runtime a runtime object.

###### `key`<sup>Required</sup> <a name="key" id="@winglang/sdk.sim.IStateClient.set.parameter.key"></a>

- *Type:* str

The object's key.

---

###### `value`<sup>Required</sup> <a name="value" id="@winglang/sdk.sim.IStateClient.set.parameter.value"></a>

- *Type:* <a href="#@winglang/sdk.std.Json">Json</a>

The object's value.

---

##### `tryGet` <a name="tryGet" id="@winglang/sdk.sim.IStateClient.tryGet"></a>

```wing
inflight tryGet(key: str): Json?
```

Checks if runtime state exists for this object and returns it's value.

If no value exists,
returns `nil`.

###### `key`<sup>Required</sup> <a name="key" id="@winglang/sdk.sim.IStateClient.tryGet.parameter.key"></a>

- *Type:* str

The object's key.

---

#### Static Functions <a name="Static Functions" id="Static Functions"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.State.onLiftType">onLiftType</a></code> | A hook called by the Wing compiler once for each inflight host that needs to use this type inflight. |
| <code><a href="#@winglang/sdk.sim.State.toInflight">toInflight</a></code> | Generates an asynchronous JavaScript statement which can be used to create an inflight client for a resource. |

---

##### `onLiftType` <a name="onLiftType" id="@winglang/sdk.sim.State.onLiftType"></a>

```wing
bring sim;

sim.State.onLiftType(host: IInflightHost, ops: MutArray<str>);
```

A hook called by the Wing compiler once for each inflight host that needs to use this type inflight.

The list of requested inflight methods
needed by the inflight host are given by `ops`.

This method is commonly used for adding permissions, environment variables, or
other capabilities to the inflight host.

###### `host`<sup>Required</sup> <a name="host" id="@winglang/sdk.sim.State.onLiftType.parameter.host"></a>

- *Type:* <a href="#@winglang/sdk.std.IInflightHost">IInflightHost</a>

---

###### `ops`<sup>Required</sup> <a name="ops" id="@winglang/sdk.sim.State.onLiftType.parameter.ops"></a>

- *Type:* MutArray&lt;str&gt;

---

##### `toInflight` <a name="toInflight" id="@winglang/sdk.sim.State.toInflight"></a>

```wing
bring sim;

sim.State.toInflight(obj: IResource);
```

Generates an asynchronous JavaScript statement which can be used to create an inflight client for a resource.

NOTE: This statement must be executed within an async context.

###### `obj`<sup>Required</sup> <a name="obj" id="@winglang/sdk.sim.State.toInflight.parameter.obj"></a>

- *Type:* <a href="#@winglang/sdk.std.IResource">IResource</a>

---

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.State.property.node">node</a></code> | <code>constructs.Node</code> | The tree node. |

---

##### `node`<sup>Required</sup> <a name="node" id="@winglang/sdk.sim.State.property.node"></a>

```wing
node: Node;
```

- *Type:* constructs.Node

The tree node.

---



## Structs <a name="Structs" id="Structs"></a>

### ContainerProps <a name="ContainerProps" id="@winglang/sdk.sim.ContainerProps"></a>

Initialization properties for `sim.Container`.

#### Initializer <a name="Initializer" id="@winglang/sdk.sim.ContainerProps.Initializer"></a>

```wing
bring sim;

let ContainerProps = sim.ContainerProps{ ... };
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.ContainerProps.property.image">image</a></code> | <code>str</code> | A name of a public Docker image to pull and run or a path to a local directory with a `Dockerfile`. |
| <code><a href="#@winglang/sdk.sim.ContainerProps.property.name">name</a></code> | <code>str</code> | A name for the container. |
| <code><a href="#@winglang/sdk.sim.ContainerProps.property.args">args</a></code> | <code>MutArray&lt;str&gt;</code> | Container arguments. |
| <code><a href="#@winglang/sdk.sim.ContainerProps.property.containerPort">containerPort</a></code> | <code>num</code> | Internal container port to expose. |
| <code><a href="#@winglang/sdk.sim.ContainerProps.property.entrypoint">entrypoint</a></code> | <code>str</code> | Container entrypoint. |
| <code><a href="#@winglang/sdk.sim.ContainerProps.property.env">env</a></code> | <code>MutMap&lt;str&gt;</code> | Environment variables to set in the container. |
| <code><a href="#@winglang/sdk.sim.ContainerProps.property.network">network</a></code> | <code>str</code> | Docker network to use for the container - such as 'host', 'bridge', etc. |
| <code><a href="#@winglang/sdk.sim.ContainerProps.property.sourceHash">sourceHash</a></code> | <code>str</code> | An explicit source hash that represents the container source. |
| <code><a href="#@winglang/sdk.sim.ContainerProps.property.sourcePattern">sourcePattern</a></code> | <code>str</code> | A glob of local files to consider as input sources for the container, relative to the build context directory. |
| <code><a href="#@winglang/sdk.sim.ContainerProps.property.volumes">volumes</a></code> | <code>MutArray&lt;str&gt;</code> | Volume mount points. |

---

##### `image`<sup>Required</sup> <a name="image" id="@winglang/sdk.sim.ContainerProps.property.image"></a>

```wing
image: str;
```

- *Type:* str

A name of a public Docker image to pull and run or a path to a local directory with a `Dockerfile`.

---

##### `name`<sup>Required</sup> <a name="name" id="@winglang/sdk.sim.ContainerProps.property.name"></a>

```wing
name: str;
```

- *Type:* str

A name for the container.

---

##### `args`<sup>Optional</sup> <a name="args" id="@winglang/sdk.sim.ContainerProps.property.args"></a>

```wing
args: MutArray<str>;
```

- *Type:* MutArray&lt;str&gt;
- *Default:* []

Container arguments.

---

##### `containerPort`<sup>Optional</sup> <a name="containerPort" id="@winglang/sdk.sim.ContainerProps.property.containerPort"></a>

```wing
containerPort: num;
```

- *Type:* num
- *Default:* no port exposed

Internal container port to expose.

---

##### `entrypoint`<sup>Optional</sup> <a name="entrypoint" id="@winglang/sdk.sim.ContainerProps.property.entrypoint"></a>

```wing
entrypoint: str;
```

- *Type:* str
- *Default:* default image entrypoint

Container entrypoint.

---

##### `env`<sup>Optional</sup> <a name="env" id="@winglang/sdk.sim.ContainerProps.property.env"></a>

```wing
env: MutMap<str>;
```

- *Type:* MutMap&lt;str&gt;
- *Default:* {}

Environment variables to set in the container.

---

##### `network`<sup>Optional</sup> <a name="network" id="@winglang/sdk.sim.ContainerProps.property.network"></a>

```wing
network: str;
```

- *Type:* str
- *Default:* default docker network

Docker network to use for the container - such as 'host', 'bridge', etc.

> [https://docs.docker.com/network.](https://docs.docker.com/network.)

---

*Example*

```wing
'host'
```


##### `sourceHash`<sup>Optional</sup> <a name="sourceHash" id="@winglang/sdk.sim.ContainerProps.property.sourceHash"></a>

```wing
sourceHash: str;
```

- *Type:* str
- *Default:* calculated based on the source files

An explicit source hash that represents the container source.

if not set, and `sourcePattern`
is set, the hash will be calculated based on the content of the source files.

---

##### `sourcePattern`<sup>Optional</sup> <a name="sourcePattern" id="@winglang/sdk.sim.ContainerProps.property.sourcePattern"></a>

```wing
sourcePattern: str;
```

- *Type:* str
- *Default:* all files

A glob of local files to consider as input sources for the container, relative to the build context directory.

---

##### `volumes`<sup>Optional</sup> <a name="volumes" id="@winglang/sdk.sim.ContainerProps.property.volumes"></a>

```wing
volumes: MutArray<str>;
```

- *Type:* MutArray&lt;str&gt;
- *Default:* []

Volume mount points.

---

*Example*

```wing
['/host:/container']
```


### PolicyProps <a name="PolicyProps" id="@winglang/sdk.sim.PolicyProps"></a>

Options for `sim.Policy`.

#### Initializer <a name="Initializer" id="@winglang/sdk.sim.PolicyProps.Initializer"></a>

```wing
bring sim;

let PolicyProps = sim.PolicyProps{ ... };
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.PolicyProps.property.principal">principal</a></code> | <code><a href="#@winglang/sdk.std.IResource">IResource</a></code> | The resource to which the policy is attached. |

---

##### `principal`<sup>Required</sup> <a name="principal" id="@winglang/sdk.sim.PolicyProps.property.principal"></a>

```wing
principal: IResource;
```

- *Type:* <a href="#@winglang/sdk.std.IResource">IResource</a>

The resource to which the policy is attached.

---

## Protocols <a name="Protocols" id="Protocols"></a>

### IResource <a name="IResource" id="@winglang/sdk.sim.IResource"></a>

- *Implemented By:* <a href="#@winglang/sdk.sim.IResource">IResource</a>

Contract that a resource backend must implement.

#### Methods <a name="Methods" id="Methods"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.IResource.onStop">onStop</a></code> | Runs when the resource is stopped. |

---

##### `onStop` <a name="onStop" id="@winglang/sdk.sim.IResource.onStop"></a>

```wing
onStop(): void
```

Runs when the resource is stopped.


### IResourceContext <a name="IResourceContext" id="@winglang/sdk.sim.IResourceContext"></a>

- *Implemented By:* <a href="#@winglang/sdk.sim.IResourceContext">IResourceContext</a>

Context for implementing a simulator resource.

#### Methods <a name="Methods" id="Methods"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.IResourceContext.log">log</a></code> | Log a message at the current point in time. |
| <code><a href="#@winglang/sdk.sim.IResourceContext.resolveToken">resolveToken</a></code> | Resolves a token value. |
| <code><a href="#@winglang/sdk.sim.IResourceContext.statedir">statedir</a></code> | The directory for the resource's state. |

---

##### `log` <a name="log" id="@winglang/sdk.sim.IResourceContext.log"></a>

```wing
inflight log(message: str, level?: LogLevel): void
```

Log a message at the current point in time.

Defaults to `info` level.

###### `message`<sup>Required</sup> <a name="message" id="@winglang/sdk.sim.IResourceContext.log.parameter.message"></a>

- *Type:* str

The message to log.

---

###### `level`<sup>Optional</sup> <a name="level" id="@winglang/sdk.sim.IResourceContext.log.parameter.level"></a>

- *Type:* <a href="#@winglang/sdk.std.LogLevel">LogLevel</a>

The severity of the message.

---

##### `resolveToken` <a name="resolveToken" id="@winglang/sdk.sim.IResourceContext.resolveToken"></a>

```wing
inflight resolveToken(name: str, value: str): void
```

Resolves a token value.

All tokens must be resolved during the
constructor of the resource.

###### `name`<sup>Required</sup> <a name="name" id="@winglang/sdk.sim.IResourceContext.resolveToken.parameter.name"></a>

- *Type:* str

The name of the token.

---

###### `value`<sup>Required</sup> <a name="value" id="@winglang/sdk.sim.IResourceContext.resolveToken.parameter.value"></a>

- *Type:* str

The value of the token.

---

##### `statedir` <a name="statedir" id="@winglang/sdk.sim.IResourceContext.statedir"></a>

```wing
statedir(): str
```

The directory for the resource's state.


### IResourceFactory <a name="IResourceFactory" id="@winglang/sdk.sim.IResourceFactory"></a>

- *Extends:* <a href="#@winglang/sdk.std.IInflight">IInflight</a>

- *Implemented By:* <a href="#@winglang/sdk.sim.IResourceFactory">IResourceFactory</a>

**Inflight client:** [@winglang/sdk.sim.IResourceFactoryClient](#@winglang/sdk.sim.IResourceFactoryClient)

A resource with an inflight "handle" method that can be passed to the `sim.Resource` constructor.



### IResourceFactoryClient <a name="IResourceFactoryClient" id="@winglang/sdk.sim.IResourceFactoryClient"></a>

- *Implemented By:* <a href="#@winglang/sdk.sim.IResourceFactoryClient">IResourceFactoryClient</a>

A resource with an inflight "handle" method that can be passed to the `sim.Resource` constructor.

#### Methods <a name="Methods" id="Methods"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.IResourceFactoryClient.handle">handle</a></code> | Function that will be called to initialize the simulator resource. |

---

##### `handle` <a name="handle" id="@winglang/sdk.sim.IResourceFactoryClient.handle"></a>

```wing
inflight handle(context: IResourceContext): IResource?
```

Function that will be called to initialize the simulator resource.

To implement a shutdown sequence, return an object that implements the `IResource` inflight interface with an `onStop()` method.

###### `context`<sup>Required</sup> <a name="context" id="@winglang/sdk.sim.IResourceFactoryClient.handle.parameter.context"></a>

- *Type:* <a href="#@winglang/sdk.sim.IResourceContext">IResourceContext</a>

---


### ISimulatorInflightHost <a name="ISimulatorInflightHost" id="@winglang/sdk.sim.ISimulatorInflightHost"></a>

- *Extends:* <a href="#@winglang/sdk.std.IInflightHost">IInflightHost</a>

- *Implemented By:* <a href="#@winglang/sdk.sim.Resource">Resource</a>, <a href="#@winglang/sdk.sim.ISimulatorInflightHost">ISimulatorInflightHost</a>

Interfaces shared by all preflight classes that host inflight code.

#### Methods <a name="Methods" id="Methods"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.ISimulatorInflightHost.addPermission">addPermission</a></code> | Add a simulated permission to this inflight host. |

---

##### `addPermission` <a name="addPermission" id="@winglang/sdk.sim.ISimulatorInflightHost.addPermission"></a>

```wing
addPermission(resource: IResource, op: str): void
```

Add a simulated permission to this inflight host.

###### `resource`<sup>Required</sup> <a name="resource" id="@winglang/sdk.sim.ISimulatorInflightHost.addPermission.parameter.resource"></a>

- *Type:* <a href="#@winglang/sdk.std.IResource">IResource</a>

The resource to add.

---

###### `op`<sup>Required</sup> <a name="op" id="@winglang/sdk.sim.ISimulatorInflightHost.addPermission.parameter.op"></a>

- *Type:* str

The action to add.

---

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.ISimulatorInflightHost.property.node">node</a></code> | <code>constructs.Node</code> | The tree node. |

---

##### `node`<sup>Required</sup> <a name="node" id="@winglang/sdk.sim.ISimulatorInflightHost.property.node"></a>

```wing
node: Node;
```

- *Type:* constructs.Node

The tree node.

---

### ISimulatorResource <a name="ISimulatorResource" id="@winglang/sdk.sim.ISimulatorResource"></a>

- *Extends:* <a href="#@winglang/sdk.std.IResource">IResource</a>

- *Implemented By:* <a href="#@winglang/sdk.sim.Container">Container</a>, <a href="#@winglang/sdk.sim.Policy">Policy</a>, <a href="#@winglang/sdk.sim.Resource">Resource</a>, <a href="#@winglang/sdk.sim.State">State</a>, <a href="#@winglang/sdk.sim.ISimulatorResource">ISimulatorResource</a>

Interfaces shared by all preflight classes targeting the simulator.

#### Methods <a name="Methods" id="Methods"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#@winglang/sdk.sim.ISimulatorResource.toSimulator">toSimulator</a></code> | Convert this resource to a resource schema for the simulator. |

---

##### `toSimulator` <a name="toSimulator" id="@winglang/sdk.sim.ISimulatorResource.toSimulator"></a>

```wing
toSimulator(): ToSimulatorOutput
```

Convert this resource to a resource schema for the simulator.

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#@winglang/sdk.sim.ISimulatorResource.property.node">node</a></code> | <code>constructs.Node</code> | The tree node. |

---

##### `node`<sup>Required</sup> <a name="node" id="@winglang/sdk.sim.ISimulatorResource.property.node"></a>

```wing
node: Node;
```

- *Type:* constructs.Node

The tree node.

---

